<h1>Insurances</h1>
<button *hasClaim="['admin','stella']" mat-mini-fab (click)="openForm(null)" title="Add New">
    <mat-icon>add</mat-icon>
</button>

<div id="container">
    <div id="insurances">
        <div *ngIf="dataSource.data.length==0" style="margin-left: 50%;;">
            <mat-spinner diameter="40"></mat-spinner>
        </div>

        <table mat-table [dataSource]="dataSource" matSort style="width: 100%;" class="mat-elevation-z8">
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
                <td mat-cell *matCellDef="let item">{{item.id}}</td>
            </ng-container>
            <ng-container matColumnDef="apartment">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Apartment</th>
                <td mat-cell *matCellDef="let item">{{item.apartment.address}}</td>
            </ng-container>
            <ng-container matColumnDef="company">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Company</th>
                <td mat-cell *matCellDef="let item">{{item.company}}</td>
            </ng-container>
            <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>price</th>
                <td mat-cell *matCellDef="let item">{{item.price}}</td>
            </ng-container>
            <ng-container matColumnDef="dateStart">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Start</th>
                <td data-id="{{item.dateStart}}" mat-cell *matCellDef="let item">
                    <span>
                        {{item.dateStart | date:'dd-MM-yyyy'}}
                    </span>
                </td>
            </ng-container>
            <ng-container matColumnDef="dateEnd">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Date End</th>
                <td data-id="{{item.dateEnd}}" mat-cell *matCellDef="let item">
                    <span>
                        {{item.dateEnd | date:'dd-MM-yyyy'}}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let item">
                    <div>
                        <button mat-icon-button matTooltip="Edit" (click)="openForm(item)" mat-button color="primary">
                            <mat-icon>mode_edit</mat-icon>
                        </button>

                        <button mat-icon-button matTooltip="Delete" *hasClaim="['admin']" (click)="delete(item.id)"
                            mat-button color="warn">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </div>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns">
            </tr>

        </table>
    </div>


</div>